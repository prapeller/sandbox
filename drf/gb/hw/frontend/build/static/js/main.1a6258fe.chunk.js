(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(t,e,n){},31:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),a=n(25),r=n.n(a),o=(n(30),n(7)),i=n(8),j=n(10),h=n(9),l=(n.p,n(31),n(6)),d=n.n(l),u=n(0),b=function(t){var e=t.user;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.id}),Object(u.jsx)("td",{children:e.username}),Object(u.jsx)("td",{children:e.date_joined}),Object(u.jsx)("td",{children:e.last_login}),Object(u.jsx)("td",{children:e.email}),Object(u.jsx)("td",{children:e.first_name}),Object(u.jsx)("td",{children:e.last_name}),Object(u.jsx)("td",{children:"".concat(e.is_staff)}),Object(u.jsx)("td",{children:"".concat(e.is_superuser)}),Object(u.jsx)("td",{children:e.groups}),Object(u.jsx)("td",{children:e.user_permissions})]})},p=function(t){var e=t.users;return Object(u.jsxs)("table",{children:[Object(u.jsx)("th",{children:"Id"}),Object(u.jsx)("th",{children:"Username"}),Object(u.jsx)("th",{children:"Date Joined"}),Object(u.jsx)("th",{children:"Last login"}),Object(u.jsx)("th",{children:"Email"}),Object(u.jsx)("th",{children:"First Name"}),Object(u.jsx)("th",{children:"Last Name"}),Object(u.jsx)("th",{children:"Is staff"}),Object(u.jsx)("th",{children:"Is superuser"}),Object(u.jsx)("th",{children:"Groups"}),Object(u.jsx)("th",{children:"Permissions"}),e.map((function(t){return Object(u.jsx)(b,{user:t})}))]})},x=n(3),O=(n(52),function(){return Object(u.jsx)("div",{children:"Footer"})}),f=n(2),g=function(t){var e=t.project,n=t.deleteProject;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.id}),Object(u.jsx)("td",{children:Object(u.jsx)(x.b,{to:"/project/".concat(e.id),children:e.name})}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Delete"})})]})},v=function(t){var e=t.projects,n=t.deleteProject;return Object(u.jsxs)("table",{children:[Object(u.jsx)("th",{children:"Id"}),Object(u.jsx)("th",{children:"Name"}),e.map((function(t){return Object(u.jsx)(g,{project:t,deleteProject:n})}))]})},m=function(t){var e=t.todo,n=t.deactivateTodo;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.id}),Object(u.jsx)("td",{children:e.creator}),Object(u.jsx)("td",{children:e.text}),Object(u.jsx)("td",{children:e.project}),Object(u.jsx)("td",{children:"".concat(e.is_active)}),Object(u.jsx)("td",{children:e.created_at}),Object(u.jsx)("td",{children:e.updated_at}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Deactivate"})})]})},k=function(t){var e=t.todos,n=t.deactivateTodo;return Object(u.jsxs)("table",{children:[Object(u.jsx)("th",{children:"Id"}),Object(u.jsx)("th",{children:"Creator ID"}),Object(u.jsx)("th",{children:"Text"}),Object(u.jsx)("th",{children:"Project ID"}),Object(u.jsx)("th",{children:"Is active"}),Object(u.jsx)("th",{children:"Created"}),Object(u.jsx)("th",{children:"Updated"}),e.map((function(t){return Object(u.jsx)(m,{todo:t,deactivateTodo:n})}))]})},C=function(t){var e=t.project;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.id}),Object(u.jsx)("td",{children:Object(u.jsx)(x.b,{to:"/project/".concat(e.id),children:e.name})}),Object(u.jsx)("td",{children:e.link}),Object(u.jsx)("td",{children:e.users})]})},y=function(t){var e=t.projects,n=Object(f.g)().id,c=e.filter((function(t){return t.id===parseInt(n)}))[0];return Object(u.jsxs)("table",{children:[Object(u.jsx)("th",{children:"Id"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Link"}),Object(u.jsx)("th",{children:"Users"}),Object(u.jsx)(C,{project:c})]})},_=n(12),S=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var c;return Object(o.a)(this,n),(c=e.call(this,t)).state={login:"",password:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(_.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){this.props.form_get_token(this.state.login,this.state.password),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(u.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(e){return t.handleChange(e)}}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.value,onChange:function(e){return t.handleChange(e)}}),Object(u.jsx)("input",{type:"submit",value:"Login!!!!!!!!!!"})]})}}]),n}(s.a.Component),P=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var c;return Object(o.a)(this,n),(c=e.call(this,t)).state={name:"",link:"",users:[]},c}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(_.a)({},t.target.name,t.target.value))}},{key:"handleUsersChange",value:function(t){var e=[];if(t.target.selectedOptions){for(var n=0;n<t.target.selectedOptions.length;n++)e.push(parseInt(t.target.selectedOptions.item(n).value));this.setState({users:e})}else this.state.users=[]}},{key:"handleSubmit",value:function(t){console.log("name:".concat(this.state.name," link:").concat(this.state.link," users:").concat(this.state.users)),this.props.createProject(this.state.name,this.state.link,this.state.users),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(u.jsx)("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}}),Object(u.jsx)("input",{type:"text",name:"link",placeholder:"link",value:this.state.link,onChange:function(e){return t.handleChange(e)}}),Object(u.jsx)("select",{multiple:!0,name:"users",onChange:function(e){return t.handleUsersChange(e)},children:this.props.users.map((function(t){return Object(u.jsx)("option",{value:t.id,children:t.username})}))}),Object(u.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),I=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var c;return Object(o.a)(this,n),(c=e.call(this,t)).state={text:"",project:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(_.a)({},t.target.name,t.target.value))}},{key:"handleProjectChange",value:function(t){var e=t.target.value;this.setState({project:e})}},{key:"handleSubmit",value:function(t){console.log("text:".concat(this.state.text," project:").concat(this.state.project)),this.props.createTodo(this.state.text,this.state.project),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(u.jsx)("input",{type:"text",name:"text",placeholder:"text",value:this.state.text,onChange:function(e){return t.handleChange(e)}}),Object(u.jsx)("select",{name:"projects",onChange:function(e){return t.handleProjectChange(e)},children:this.props.projects.map((function(t){return Object(u.jsx)("option",{value:t.id,children:t.name})}))}),Object(u.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),T=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var c;return Object(o.a)(this,n),(c=e.call(this,t)).state={users:[],projects:[],todos:[],token:""},c}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("token");this.setState({token:t},this.get_data)}},{key:"get_data",value:function(){var t=this,e=this.get_headers();d.a.get("http://127.0.0.1:8000/api/v2/users/",{headers:e}).then((function(e){var n=e.data.results;t.setState({users:n})})).catch((function(t){console.log(t)})),d.a.get("http://127.0.0.1:8000/api/v1/projects/",{headers:e}).then((function(e){var n=e.data.results;t.setState({projects:n})})).catch((function(t){console.log(t)})),d.a.get("http://127.0.0.1:8000/api/v1/todos/",{headers:e}).then((function(e){var n=e.data.results;t.setState({todos:n})})).catch((function(t){console.log(t)}))}},{key:"get_headers",value:function(){return this.is_authenticated()?{Authorization:"Token ".concat(this.state.token)}:{}}},{key:"is_authenticated",value:function(){return!!this.state.token}},{key:"get_token",value:function(t,e){var n=this;d.a.post("http://127.0.0.1:8000/api-token-auth/",{username:t,password:e}).then((function(c){var s=c.data.token;console.log("sending post to api-token-auth from get_token using login:".concat(t,", password:").concat(e,", and got token: ").concat(s)),localStorage.setItem("token",s),console.log("token saved to localStorage"),n.setState({token:s},n.get_data)})).catch((function(t){console.log(t)}))}},{key:"logout",value:function(){localStorage.setItem("token",""),this.setState({users:[],projects:[],todos:[],token:""})}},{key:"deactivateTodo",value:function(t){var e=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/v1/todos/".concat(t),{headers:n}).then((function(n){var c=n.data,s=e.state.todos;console.log(s),s[s.findIndex((function(e){return e.id===t}))]=c,e.setState({todos:s})})).catch((function(t){console.log(t)}))}},{key:"createTodo",value:function(t,e){var n=this,c=this.get_headers();d.a.post("http://127.0.0.1:8000/api/v1/todos/",{text:t,project:e},{headers:c}).then((function(t){n.get_data()})).catch((function(t){console.log(t)}))}},{key:"deleteProject",value:function(t){var e=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/v1/projects/".concat(t),{headers:n}).then((function(n){n.data.results;e.setState({projects:e.state.projects.filter((function(e){return e.id!==t}))})})).catch((function(t){console.log(t)}))}},{key:"createProject",value:function(t,e,n){var c=this,s=this.get_headers();d.a.post("http://127.0.0.1:8000/api/v2/projects/",{name:t,link:e,users:n},{headers:s}).then((function(t){c.get_data()})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return Object(u.jsx)("div",{children:Object(u.jsxs)(x.a,{children:[Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/users",children:"Users"})}),Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/projects",children:"Projects"})}),Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/projects/create",children:"Create Project"})}),Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/todos",children:"Todos"})}),Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/todos/create",children:"Create Todo"})}),Object(u.jsx)("li",{children:this.is_authenticated()?Object(u.jsx)("button",{onClick:function(){return t.logout()},children:"Logout"}):Object(u.jsx)(x.b,{to:"/login",children:"Login"})})]}),Object(u.jsxs)(f.c,{children:[Object(u.jsx)(f.a,{exact:!0,path:"/",element:Object(u.jsx)("h1",{children:"Hope page"})}),Object(u.jsx)(f.a,{exact:!0,path:"/users",element:Object(u.jsx)(p,{users:this.state.users})}),Object(u.jsx)(f.a,{exact:!0,path:"/projects",element:Object(u.jsx)(v,{projects:this.state.projects,deleteProject:function(e){return t.deleteProject(e)}})}),Object(u.jsx)(f.a,{exact:!0,path:"/projects/create",element:Object(u.jsx)(P,{users:this.state.users,createProject:function(e,n,c){return t.createProject(e,n,c)}})}),"}/>",Object(u.jsx)(f.a,{exact:!0,path:"/project/:id",element:Object(u.jsx)(y,{projects:this.state.projects})}),Object(u.jsx)(f.a,{exact:!0,path:"/todos",element:Object(u.jsx)(k,{todos:this.state.todos,deactivateTodo:function(e){return t.deactivateTodo(e)}})}),Object(u.jsx)(f.a,{exact:!0,path:"/todos/create",element:Object(u.jsx)(I,{projects:this.state.projects,createTodo:function(e,n){return t.createTodo(e,n)}})}),Object(u.jsx)(f.a,{exact:!0,path:"/login",element:Object(u.jsx)(S,{form_get_token:function(e,n){return t.get_token(e,n)}})}),Object(u.jsx)(f.a,{path:"*",element:Object(u.jsx)("main",{children:Object(u.jsx)("p",{children:"nothing here, 404, page not found, get out of here"})})})]}),Object(u.jsx)(O,{})]})})}}]),n}(s.a.Component),D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),s(t),a(t),r(t)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root")),D()}},[[51,1,2]]]);
//# sourceMappingURL=main.1a6258fe.chunk.js.map